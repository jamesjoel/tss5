(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[19183],{787410:(e,i,t)=>{t.d(i,{Z:()=>u});var n=t(667294),o=t(973935),r=t(785893);function s(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const a=new Map;let l=null;const d=e=>{e.forEach((e=>{const i=a.get(e.target);i&&i(e)}))},u=e=>{class i extends n.Component{constructor(...e){super(...e),s(this,"seen",!1),s(this,"enter",(e=>{const i=e.intersectionRatio>0||e.isIntersecting;this.seen=i,this.seen&&this.props.onVisibilityChanged(!0)})),s(this,"leave",(()=>{const e=this._node;e&&(e=>a.has(e))(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)})),s(this,"observe",(e=>{try{this._node=o.findDOMNode(this)}catch(n){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:i}=this.props,t=this._node;((e,i="-64px 0px 0px 0px",t)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};l=l||new window.IntersectionObserver(d,n),a.set(e,t),l.observe(e)})(t,e,(e=>{if(!a.has(t))return;const n=i?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,o=this.props.trackFullVisible?e.intersectionRatio>=1:n,r=this.props.trackFullVisible?0===e.intersectionRatio:!o;!this.seen&&o?this.enter(e):this.seen&&r&&this.leave()}))}))}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),(e=>{l.unobserve(e),a.delete(e)})(e))}render(){return(0,r.jsx)(e,{...this.props})}}return s(i,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),i}},991773:(e,i,t)=>{t.d(i,{Z:()=>a});var n=t(667294);const o=new Map;let r=null;const s=e=>{e.forEach((e=>{const i=o.get(e.target);i&&i(e)}))};function a({onVisibilityChanged:e,inAdsDesktopVideoExperiment:i,trackFullVisible:t,rootMargin:a}){const l=(0,n.useRef)(null);let d=!1;const u=()=>{var i;l.current instanceof HTMLElement&&(i=l.current,o.has(i))&&(d&&(e(!1),d=!1))},c=(0,n.useCallback)((n=>{l.current instanceof HTMLElement&&((e,i="-64px 0px 0px 0px",t)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:i,threshold:[0,.5,1]};r=r||new window.IntersectionObserver(s,n),o.set(e,t),r.observe(e)})(l.current,n,(n=>{if(!o.has(l.current))return;const r=i?n.intersectionRatio>=.5:n.intersectionRatio>0||n.isIntersecting,s=t?n.intersectionRatio>=1:r,a=t?0===n.intersectionRatio:!s;!d&&s?(i=>{const t=i.intersectionRatio>0||i.isIntersecting;d=t,d&&e(!0)})(n):d&&a&&u()}))}),[l.current]);return(0,n.useEffect)((()=>(c(a),()=>{var e;l.current instanceof HTMLElement&&(u(),e=l.current,r.unobserve(e),o.delete(e))})),[c]),l}},832654:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(349700);function o(e,i){const{alt_text:t,auto_alt_text:o}=e;return t?(0,n.nk)(i.bt("This contains: {{ altText }}", "This contains: {{ altText }}", "web.altText", undefined, true),{altText:t}).join(""):o?(0,n.nk)(i.bt("This may contain: {{ autoAltText }}", "This may contain: {{ autoAltText }}", "web.altText", undefined, true),{autoAltText:o}).join(""):null}},312955:(e,i,t)=>{t.d(i,{Z:()=>x});var n=t(294184),o=t.n(n),r=t(814115),s=t(832654);const a={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1};var l=t(773285),d=t(883119),u=t(785893);function c({dominantColor:e,naturalHeight:i,naturalWidth:t,onError:n,onLoad:o,title:r,url:s}){return(0,u.jsx)(d.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:"177.77777777777777%"}},children:(0,u.jsx)(d.xu,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:a.storyPinImage}},children:(0,u.jsx)(d.Ee,{alt:r,color:e||"transparent",naturalHeight:null!=i?i:1,naturalWidth:null!=t?t:1,onError:n,onLoad:o,src:s,fit:"cover"})})})}function h({dominantColor:e,naturalHeight:i,naturalWidth:t,onError:n,onLoad:o,title:r,url:s}){return(0,u.jsx)(d.xu,{width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:a.storyPinImage}},children:(0,u.jsx)(d.Ee,{alt:r,color:e||"transparent",naturalHeight:null!=i?i:1,naturalWidth:null!=t?t:1,onError:n,onLoad:o,src:s})})}function p({onError:e=(()=>{}),onLoad:i=(()=>{}),pin:t}){const{checkExperiment:n}=(0,l.F)(),{anyEnabled:o}=n("web_idea_pin_flexible_aspect_ratio_display"),{title:r="",dominant_color:s,images:a={}}=t,{height:d,width:p,url:m}=function(e){var i;return"number"==typeof(null===(i=e["474x"])||void 0===i?void 0:i.width)&&"number"==typeof e["474x"].height&&e["474x"].width>e["474x"].height?e["736x"]:e["474x"]}(a)||{},g=o?h:c;return(0,u.jsx)(g,{dominantColor:s,naturalHeight:d,naturalWidth:p,onError:e,onLoad:i,title:r,url:m||""})}var m=t(898781),g=t(349700),_=t(310227),v=t(243943);const x=({cropHeight:e,cropWidth:i,fallbackColor:t,highResOnly:n,imageFit:a,lowResOnly:l,mediumResOnly:c,onError:h,onLoad:x,pin:f,saved:y=!1,animateGif:b})=>{var w,P,A;const C=(0,m.ZP)(),T=(0,v.Xx)(),{carousel_data:j,description:S="",dominant_color:M,grid_title:V,id:E,images:I,title:z}=f,W=(0,g.nk)(C.bt("This contains an image of: {{ pinTitle }}", "This contains an image of: {{ pinTitle }}", "web.altText", undefined, true),{pinTitle:z||V}).join(""),O=(0,s.Z)(f,C)||S.trim().length>0&&S||W;if(j)return(0,u.jsx)(r.Z,{onError:h,onLoad:x,highResOnly:n,lowResOnly:l,pinId:E});let L,Z="",k=0,H=0;if(I){var R,B,D;let e=I["236x"];var $,F,U,N,G;if(n?e=I["736x"]||I.orig||I["474x"]||I["236x"]:c&&(e=I["474x"]||I.orig||I["236x"]),k=null===(R=e)||void 0===R?void 0:R.height,H=null===(B=e)||void 0===B?void 0:B.width,Z=null===(D=e)||void 0===D?void 0:D.url,l||c||n)L=null!==($=e)&&void 0!==$&&$.url?`${e.url} 1x`:"";else L=[(null===(F=I["236x"])||void 0===F?void 0:F.url)&&`${I["236x"].url} 1x`,(null===(U=I["474x"])||void 0===U?void 0:U.url)&&`${I["474x"].url} 2x`,(null===(N=I["736x"])||void 0===N?void 0:N.url)&&`${I["736x"].url} 3x`,(null===(G=I.orig)||void 0===G?void 0:G.url)&&`${I.orig.url} 4x`].filter(Boolean).join(", ")}if(b){const e=Math.max(f.embed&&f.embed.width||0,236),i=Math.max(f.embed&&f.embed.height||0,236),t=f.embed?f.embed.src:"";t&&(k=i,H=e,Z=t,L="")}return null!=T&&T.image&&(k=T.image.height,H=T.image.width,Z=T.image.url),(0,u.jsx)(d.kC,{alignItems:"center",justifyContent:"start",minHeight:_.Ml,children:(0,u.jsx)(d.xu,{flex:"grow",children:(0,u.jsx)("div",{className:o()({savedGradient:y}),children:f.story_pin_data_id?(0,u.jsx)(p,{pin:f,onError:h,onLoad:x}):(0,u.jsx)(d.xu,{height:i?e:void 0,width:i||void 0,"data-test-id":"non-story-pin-image",children:(0,u.jsx)(d.Ee,{alt:O,color:"dominant"===t?M:t,fit:a,naturalHeight:null!==(w=k)&&void 0!==w?w:1,naturalWidth:null!==(P=H)&&void 0!==P?P:1,onError:h,onLoad:x,src:null!==(A=Z)&&void 0!==A?A:"",srcSet:L})})})})})}},118334:(e,i,t)=>{t.d(i,{Z:()=>A});var n=t(667294),o=t(964082),r=t(983722),s=t(787410),a=t(36971),l=t(463045),d=t(494349),u=t(554779),c=t(312955),h=t(639758),p=t(898781),m=t(991773),g=t(572260),_=t(883119),v=t(623568),x=t(785893);const f=new Set(["ConversationView","TodayTabFeed"]);function y({inAdsDesktopVideoExperiment:e,isAutoplay:i,cropHeight:t,currentTime:o,lowResOnly:r,highResOnly:s,onLoad:a,onError:l,saved:y,onTimeChange:b,isExperimentalPinRep:w,pin:P,surface:A,playing:C,rootMargin:T,viewType:j,viewParameter:S,onVisibilityChanged:M,trackFullVisible:V,inVisibilityChangedHookExperiment:E,imageHeightModifier:I,cropWidth:z}){var W,O;const L=(0,p.ZP)(),[Z,k]=(0,n.useState)(!1),[H,R]=(0,n.useState)(!0),B=(0,v.jL)(P),D=B&&!P.is_eligible_for_web_closeup,$=w&&B&&P.is_eligible_for_web_closeup&&!f.has(A),{setCurrentVideo:F}=(0,d.I)(),U=D||!w||!B,N=(0,m.Z)({onVisibilityChanged:M,inAdsDesktopVideoExperiment:e,trackFullVisible:V,rootMargin:T});let G=!C;e&&(G=H,i&&C&&H&&R(!1));const{url:q}=(null===(W=P.images)||void 0===W?void 0:W["236x"])||{},{id:J,is_promoted:K}=P,X=(0,n.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),F({pinId:J,isPromoted:Boolean(K),currentTime:0}),k(!1)}),[K,J,F]),Q=(0,n.useCallback)((()=>{K&&k($)}),[$,K]);if(!P.videos||null===(O=P.videos.video_list)||void 0===O||!O.V_HLSV4)return null;const{height:Y,thumbnail:ee,width:ie,url:te}=P.videos.video_list.V_HLSV4||{},ne=P.videos.id,oe=[{type:"video/m3u8",src:te}];let re,se=(null!=ie?ie:1)/(null!=Y?Y:1);const ae=e&&A&&(0,u.Z)(A);if(ae&&(se=1,re="transparent",I&&(se-=I-1)),Z&&B)return(0,x.jsx)(_.xu,{ref:E?N:null,children:(0,x.jsx)(h.Z,{backgroundImage:null!=q?q:"",naturalHeight:null!=Y?Y:1,naturalWidth:null!=ie?ie:1,pin:P,onRestartVideo:X})});if(G){let e={highResOnly:s,lowResOnly:r,onError:l,onLoad:a,pin:P,saved:y};return ae&&(e={...e,cropHeight:t,cropWidth:z,imageFit:"contain"}),(0,x.jsx)(_.xu,{ref:E?N:null,children:(0,x.jsx)(c.Z,{...e})})}return(0,x.jsx)(_.xu,{ref:E?N:null,children:(0,x.jsx)(g.ZP,{isAutoPlay:!!i,cropHeight:t,rootMargin:T,surface:A,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:S,component:0,objectId:P.id,video_id:ne,view:j},accessibilityMaximizeLabel:L.bt("Maximise", "Maximize", "Maximize button on video", undefined, true),accessibilityMinimizeLabel:L.bt("Minimise", "Minimize", "Minimize button on video", undefined, true),accessibilityMuteLabel:L.bt("Mute", "Mute", "Mute button on video", undefined, true),accessibilityPauseLabel:L.bt("Pause", "Pause", "Pause button on video", undefined, true),accessibilityPlayLabel:L.bt("Play", "Play", "Play button on video", undefined, true),accessibilityProgressBarLabel:L.bt("Progress bar", "Progress bar", "PinVideo.accessibilityProgressBarLabel", undefined, true),accessibilityUnmuteLabel:L.bt("Unmute", "Unmute", "Unmute button on video", undefined, true),aspectRatio:se,backgroundColor:re,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:o||-1},loop:U,onTimeChange:b,playing:C,onPlay:()=>{},onPlayError:()=>{},poster:q||ee,src:null!=oe?oe:[],videoStartTime:o,volume:0,onEnded:Q})})}function b(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}const w=(0,s.Z)(y);class P extends n.Component{constructor(...e){super(...e),b(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pin:i,videosAutoplaying:t}=this.props,{id:n}=i,o=(0,a.Z)(n,t);return this.currentVideoCurrentTime||o||e})),b(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:i,pin:t,setCurrentVideo:n,pauseAutoplay:s,videosAutoplaying:a}=this.props,{id:d,is_promoted:u}=t,c=(0,l.Z)(d,a),h=(0,o.Z)(d,a);if(e){if(u)n({pinId:d,isPromoted:u,currentTime:this.calculateCurrentVideoTime()});else if(h){const e=(0,r.Z)(),{anyEnabled:i}=(null==e?void 0:e.experimentsClient.checkExperiment("hfp_web_video_autoplay_in_grid"))||{};n({pinId:d,isPromoted:Boolean(u),currentTime:this.calculateCurrentVideoTime(),inVideoGridAutoplayExp:i})}}else!e&&c&&s({pinId:d,isPromoted:Boolean(u),currentTime:i||this.currentVideoCurrentTime})})),b(this,"handleVideoTimeChange",(e=>{const{pin:i,onTimeChange:t,videosAutoplaying:n}=this.props,{id:o}=i;(0,l.Z)(o,n)&&(this.currentVideoCurrentTime=e.time),t&&t(e)}))}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const{appInFocus:i}=e,{appInFocus:t,currentTimeFromPinRep:n,pauseAutoplay:o,pin:r,setCurrentVideo:s,videosAutoplaying:a}=this.props,{id:d,is_promoted:u}=r,c=(0,l.Z)(d,a);t!==i&&!t&&c?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:d,isPromoted:Boolean(u),currentTime:n||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&t&&(this.pausedDueToBrowserOutOfFocus=!1,s({pinId:d,isPromoted:Boolean(u),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:i,pin:t,videosAutoplaying:n}=this.props,{id:o,is_promoted:r}=t;(0,l.Z)(o,n)&&i({pinId:o,isPromoted:Boolean(r),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:i,pin:t,surface:n,videosAutoplaying:o,viewParameter:s,viewType:d,highResOnly:u,lowResOnly:c,onError:h,onLoad:p,saved:m,inAdsDesktopVideoExperiment:g,isExperimentalPinRep:_,rootMargin:v,cropWidth:f,imageHeightModifier:b}=this.props,{id:P}=t,A=(0,a.Z)(P,o),C=(0,l.Z)(P,o)&&i,T=(0,r.Z)(),{anyEnabled:j}=(null==T?void 0:T.experimentsClient.checkExperiment("web_mqtt_finddomnode_deprecation"))||{};return j?(0,x.jsx)(y,{cropHeight:e,rootMargin:v,currentTime:A,inAdsDesktopVideoExperiment:g,isAutoplay:i,viewParameter:s,viewType:d,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:t,surface:n,playing:C,trackFullVisible:!1,highResOnly:u,lowResOnly:c,onError:h,onLoad:p,saved:m,isExperimentalPinRep:_,inVisibilityChangedHookExperiment:j,cropWidth:f,imageHeightModifier:b}):(0,x.jsx)(w,{cropHeight:e,rootMargin:v,currentTime:A,inAdsDesktopVideoExperiment:g,isAutoplay:i,viewParameter:s,viewType:d,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:t,surface:n,playing:C,trackFullVisible:!1,highResOnly:u,lowResOnly:c,onError:h,onLoad:p,saved:m,isExperimentalPinRep:_,cropWidth:f,imageHeightModifier:b})}}function A(e){const{appUI:{appInFocus:i,isAutoplay:t,videosAutoplaying:n},pauseAutoplay:o,setCurrentVideo:r}=(0,d.I)();return(0,x.jsx)(P,{...e,appInFocus:i,isAutoplay:t,pauseAutoplay:o,setCurrentVideo:r,videosAutoplaying:n})}},243943:(e,i,t)=>{t.d(i,{Xx:()=>m,wA:()=>c,wH:()=>p});var n=t(667294),o=t(752802),r=t(835209),s=t(407043),a=t(789707),l=t(533655),d=t(785893);const u=(0,n.createContext)(undefined),c=e=>{const{variant_set:i}=(0,r.Z)({richPinData:e.rich_metadata})||{},{dimension_metadata:t,variants:n}=i||{};if(!t||!n)return!1;const o=t.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return!!(o&&o.name&&o.values&&1!==o.values.length)},h=({pinId:e,children:i,dimensionMetadata:t,primaryDimName:r,variants:c,primaryDimensionThumbnailImages:h})=>{const p=(0,n.useCallback)((({selectedMap:e})=>{const i=(0,l.B)({dimensionMetadata:t,primaryDimName:r,primaryDimensionThumbnailImages:h,defaultStatus:"invalid"});return(0,l.U0)({variantMap:i,selectedMap:e,variants:c}),i}),[t,r,h,c]),{logContextEvent:m}=(0,s.v)(),g=c.find((e=>e.is_preselected)),_=(0,a.a)(),{pinsState:v,setPinState:x}=_||{},f=v&&v[e],y=f?f.selectedMap:(0,l.O5)(c),b=f?f.selectedVariants:(0,l.x1)({selectedMap:y,variants:c}),w=f?f.variantMap:p({selectedMap:y}),P=!!f&&f.isSelectedByUser,A=f?f.variantUrl:(null==g?void 0:g.pin_id)||e,C=(0,n.useCallback)(((i,t=!1)=>{const n=(0,l.x1)({selectedMap:i,variants:c}),o={selectedMap:i,selectedVariants:n,variantMap:p({selectedMap:i}),isSelectedByUser:t,variantUrl:""},r=n[0].pin_id;r&&(o.variantUrl=r),x&&x(e,o)}),[p,e,x,c]),T=(0,n.useCallback)((()=>{const e=(0,l.O5)(c);C(e)}),[C,c]),j=(0,n.useCallback)((({dimensionName:e,variant:i,isAutoSelection:t=!1})=>{var n;const o=null===(n=w[e])||void 0===n?void 0:n.find((({value:e})=>e===i));try{if(!o)throw new Error(`Unable to find the selected variant ${e}: ${i}`);if(y[e]===i)return;const n={..."invalid"!==o.status?y:{},[e]:i},r=(0,l.i8)({variantMap:w,status:"invalid"});(0,l.U0)({variantMap:r,selectedMap:n,variants:c}),C(n,!t),m({event_type:10240,component:14092})}catch(r){throw T(),r}}),[w,y,c,C,T,m]),{title:S}=b[0],M=(0,o.Z)({images:(b[0].additional_images||[])[0].canonical_images}),V=(0,l.$b)(b),E=(0,n.useMemo)((()=>{const e=((null==g?void 0:g.dimensions)||{})[r],i=w[r]||[];let n=i;if(e&&i){const t=i.find((i=>i.value===e));t&&(n=[t,...i.filter((i=>i.value!==e))])}return{dimensionMetadata:t,offerSummary:V,primaryVariants:n,primaryDimName:r,selectedMap:y,isSelectedByUser:P,selectVariant:j,title:S,variants:c,image:M,variantUrl:A}}),[g,r,w,t,V,y,P,j,S,c,M,A]);return(0,d.jsx)(u.Provider,{"data-test-id":"safe-product-pins-feed-context-provider",value:E,children:i})},p=({children:e,pin:i,isEligible:t})=>{if(!t)return(0,d.jsx)(u.Provider,{"data-test-id":"undefined-context-provider",value:void 0,children:e});const{variant_set:n}=(0,r.Z)({richPinData:i.rich_metadata})||{},{dimension_metadata:o,primary_dimension_thumbnail_images:s,variants:a}=n||{},l=null==o?void 0:o.find((e=>{var i;return"color"===(null===(i=e.name)||void 0===i?void 0:i.toLowerCase())}));return(0,d.jsx)(h,{pinId:i.id,dimensionMetadata:o||[],primaryDimName:(null==l?void 0:l.name)||"",primaryDimensionThumbnailImages:s,variants:a||[],children:e})},m=()=>(0,n.useContext)(u)},789707:(e,i,t)=>{t.d(i,{A:()=>s,a:()=>a});var n=t(667294),o=t(785893);const r=(0,n.createContext)(void 0),s=({children:e})=>{const[i,t]=(0,n.useState)({}),s=(0,n.useMemo)((()=>({setPinState:(e,n)=>{t({...i,[e]:{...i[e]||{},...n}})},pinsState:i})),[i]);return(0,o.jsx)(r.Provider,{value:s,children:e})},a=()=>(0,n.useContext)(r)},533655:(e,i,t)=>{t.d(i,{$b:()=>l,A6:()=>u,B:()=>o,O5:()=>c,U0:()=>a,i8:()=>r,x1:()=>h,xD:()=>d});var n=t(752802);const o=({defaultStatus:e="available",dimensionMetadata:i,primaryDimName:t,primaryDimensionThumbnailImages:o})=>{const r={};for(const{values:n,name:s}of i)s&&n&&(r[s]=n.map((i=>({status:e,value:i}))));return(r[t]||[]).forEach(((e,i)=>{const t=o&&o[i.toString()];t&&(e.image=(0,n.Z)({images:t.canonical_images}))})),r},r=({status:e,variantMap:i})=>{const t={};for(const o in i){var n;t[o]=null===(n=i[o])||void 0===n?void 0:n.map((i=>({...i,status:e})))}return t},s=({dimensionName:e,variants:i,selectedTuple:t,variantStatuses:n})=>{const o=t.filter((([i])=>i!==e));for(const{dimensions:r={},offer_summary:s={}}of i){if(!o.every((([e,i])=>r[e]===i)))continue;const i=n.find((({value:i})=>i===r[e]));i&&(i.status=s.in_stock||"available"===i.status?"available":"outOfStock")}},a=({variants:e,selectedMap:i={},variantMap:t})=>{const n=Object.entries(i);for(const o in t){const i=t[o];i&&s({dimensionName:o,variants:e,selectedTuple:n,variantStatuses:i})}},l=e=>{let i,t,n,o,r=!1;const{percentage_off:s,standard_price:a}=1===e.length&&e[0].offer_summary||{};for(const l of e){const{max_price:e,max_price_val:s,min_price:a,min_price_val:d,price:u,price_val:c,price_in_micro_currency:h,in_stock:p}=l.offer_summary||{},m=c||Number(h);Number.isFinite(d)&&Number.isFinite(s)&&((void 0===t||d<t)&&(t=d,i=a),(void 0===o||s>o)&&(o=s,n=e),r=r||!!p),Number.isFinite(m)&&((null==t||m<t)&&(t=m,i=u),(null==o||m>o)&&(o=m,n=u),r=r||!!p)}if(n&&i)return i===n?{in_stock:r,percentage_off:s,price:i,standard_price:a}:{in_stock:r,max_price:n,min_price:i,percentage_off:s,price:i,standard_price:a}},d=(e,i)=>e.length===i.length&&e.every(((e,t)=>{var o,r;return(null===(o=(0,n.Z)({images:e.canonical_images}))||void 0===o?void 0:o.url)===(null===(r=(0,n.Z)({images:i[t].canonical_images}))||void 0===r?void 0:r.url)})),u=e=>{const i=new Set;return e.filter((e=>{const{url:t}=(0,n.Z)({images:e.canonical_images})||{};return!!t&&(!i.has(t)&&(i.add(t),!0))}))||[]},c=e=>{var i;const t={...(null===(i=e.find((e=>!!e.is_preselected)))||void 0===i?void 0:i.dimensions)||{}};for(const n in t)t[n]||delete t[n];return t},h=({selectedMap:e,variants:i})=>i.filter((({dimensions:i={}})=>{for(const t in e){const n=e[t];if(i[t]!==n)return!1}return!0}))},310227:(e,i,t)=>{t.d(i,{Dv:()=>r,Ml:()=>s,Oc:()=>n,mv:()=>o});const n=16,o=4,r={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},s=120},737022:(e,i,t)=>{function n(e){return e?e["564x"]&&e["564x"].url?e["564x"]:e["736x"]&&e["736x"].url?e["736x"]:e["474x"]&&e["474x"].url?e["474x"]:e["236x"]&&e["236x"].url?e["236x"]:null:null}t.d(i,{Z:()=>n})},687551:(e,i,t)=>{function n(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}t.d(i,{Z:()=>n})},64446:(e,i,t)=>{t.d(i,{Z:()=>m});var n=t(605028);var o=t(341732),r=t(81226),s=t(898781),a=t(623568),l=t(773285),d=t(883119),u=t(785893);const c={borderRadius:"18px",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"},h={borderRadius:"18px",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"4px 8px"};function p({backgroundColor:e,identifier:i,size:t="sm"}){const n="pine"===e?"#0FA573":"#fff",o="sm"===t?c:h;return(0,u.jsx)(d.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{...o,backgroundColor:e?n:"rgba(255, 255, 255, 0.8)",color:"pine"===e?"#fff":"#111"}},"data-test-id":"PinTypeIdentifier",children:i})}function m({pin:e,size:i="sm",allowProductCarousel:t,allowShoppingPriceIndicator:c,shoppingLabelColor:h}){const m=(0,s.ZP)(),{checkExperiment:g}=(0,l.F)(),_=(0,n.Z)(e);if(_.isGif)return p({identifier:"GIF",size:i});if(_.isStoryPin){const{page_count:t=0,static_page_count:n=0,total_video_duration:o=0}=e.story_pin_data||{},{anyEnabled:s}=g("hfp_idea_pin_identifer_v2_web");let l=t.toString();const c=s?o+n*a.oN:o;if(c>0)return l=(0,r.Z)(c),p({identifier:l,size:i});return p({identifier:(0,u.jsxs)(d.kC,{alignItems:"center",justifyContent:"between",children:[(0,u.jsx)(d.xu,{marginEnd:1,display:"flex",alignItems:"center",children:(0,u.jsx)(d.JO,{accessibilityLabel:m.bt("Idea Pin", "Idea Pin", "pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel", undefined, true),inline:!0,icon:"idea-pin",color:"default",size:"sm"===i?12:16})}),(0,u.jsx)(d.xv,{inline:!0,size:"100",weight:"bold",children:l})]}),size:i})}if(_.isVideo){const t=e.videos,{duration:n=0}=t&&t.video_list&&t.video_list[Object.keys(t.video_list)[0]]||{};return p({identifier:(0,r.Z)(n),size:i})}if(_.isProduct){const t=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary;if(c){const e=t&&(t.price||t.max_price);return e?p({identifier:e,size:i}):null}if(h){const t=function(e){var i;return((((null===(i=e.rich_summary)||void 0===i?void 0:i.products)||[])[0]||{}).label_info||{}).labels||[]}(e)[0];return t?p({identifier:t,backgroundColor:h,size:i}):null}return null}if(t){const t=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],n=t&&(0,o.Z)(e.images,t.additional_images,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:r=[],index:s=0}=n;return p({identifier:`${s+1}/${r.length}`,size:i})}if(_.isCarousel){const t=e.carousel_data||{},{carousel_slots:n=[],index:o=0}=t;return p({identifier:`${o+1}/${n.length}`,size:i})}return null}},752802:(e,i,t)=>{t.d(i,{Z:()=>o});const n=["564x","736x","orig","474x","236x"],o=({images:e={},resolutionPreferences:i=n})=>{for(const t of i)if(e[t]&&e[t].url)return e[t];return null}},605028:(e,i,t)=>{t.d(i,{Z:()=>r});var n=t(687551),o=t(623568);function r(e){const{access:i,attribution:t,embed:r,is_eligible_for_web_closeup:s,rich_summary:a,sponsorship:l,story_pin_data_id:d,videos:u}=e,c={isLeadPin:!1,isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isSponsored:!1,isStoryPin:!1,isVideo:!1};(0,o._Q)(e)&&(c.isLeadPin=!0),(0,n.Z)(e)&&(c.isCarousel=!0),s&&(c.isOneTap=!0),(0,o.iR)(u)&&(c.isVideo=!0);const h=r||t&&t.embed||null;return h&&"gif"===h.type&&(c.isGif=!0),a&&"product"===a.type_name&&(c.isProduct=!0),a&&"recipe"===a.type_name&&(c.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(c.isPromoted=!0),(i||[]).includes("write")&&(c.isOwnPin=!0),d&&(c.isStoryPin=!0),l&&(c.isSponsored=!0),c}},964082:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};for(const r in o){const{paused:i}=o[r];if(r!==e&&!i)return!1}return!0}t.d(i,{Z:()=>n})},36971:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};return o[e]&&o[e].currentTime}t.d(i,{Z:()=>n})},463045:(e,i,t)=>{function n(e,i){const{organicVideosAutoplaying:t,promotedVideosAutoplaying:n}=i,o={...t,...n};return!!o[e]&&!o[e].paused}t.d(i,{Z:()=>n})},639758:(e,i,t)=>{t.d(i,{Z:()=>d});var n=t(898781),o=t(883119),r=t(785893);const s={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},a={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},l={overlay:{__style:{backgroundColor:"#000"}}};function d({backgroundImage:e,naturalHeight:i,naturalWidth:t,onRestartVideo:d,pinTitle:u,pin:c}){const h=(0,n.ZP)(),{id:p}=c;return(0,r.jsxs)(o.Ee,{alt:u||h.bt("Pin image", "pin image", "image of a pin", undefined, true),naturalHeight:i,naturalWidth:t,src:e,children:[(0,r.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:l.overlay}),(0,r.jsxs)(o.xu,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${p}`,children:[(0,r.jsx)(o.iP,{rounding:2,children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,r.jsx)(o.JO,{accessibilityLabel:h.bt("Visit site", "Visit site", "Button when pressed goes to pin's website", undefined, true),color:"light",dangerouslySetSvgPath:a,size:25}),(0,r.jsx)(o.xu,{margin:1}),(0,r.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:h.bt("Visit site", "Visit site", "Button when pressed goes to pin's website", undefined, true)})]})}),(0,r.jsx)(o.xu,{margin:3}),(0,r.jsx)(o.iP,{onTap:d,rounding:2,children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,r.jsx)(o.JO,{accessibilityLabel:h.bt("Watch again", "Watch again", "Button when pressed restarts the video", undefined, true),color:"light",dangerouslySetSvgPath:s,size:25}),(0,r.jsx)(o.xu,{margin:1}),(0,r.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:h.bt("Watch again", "Watch again", "Button when pressed restarts the video", undefined, true)})]})})]})]})}},554779:(e,i,t)=>{t.d(i,{Z:()=>o});var n=t(307640);function o(e){return n.zI.includes(e)}},814115:(e,i,t)=>{t.d(i,{Z:()=>_});var n=t(667294),o=t(564194),r=t(834911),s=t(737022),a=t(310227),l=t(802201),d=t(898781),u=t(718482),c=t(883119),h=t(444445),p=t(785893);function m(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}class g extends n.Component{constructor(...e){super(...e),m(this,"state",{showBadge:!0}),m(this,"renderBadge",(()=>{const{carouselData:e,isCloseup:i,showCarouselBadge:t}=this.props;if(!e)return null;const{showBadge:n}=this.state,{carousel_slots:o,index:r}=e,s=n?.8:0;return!i&&t?(0,p.jsx)(c.xu,{alignItems:"center",color:"selected",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new c.Ry(1),dangerouslySetInlineStyle:{__style:{opacity:s,transition:"opacity .3s"}},children:(0,p.jsx)(c.xv,{color:"inverse",children:`${(null!=r?r:0)+1}/${(null!=o?o:[]).length}`})}):null}))}componentDidMount(){this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)}componentDidUpdate(e){const{showBadge:i}=this.state,{carouselData:t}=e,{carouselData:n}=this.props;if(!t||!n)return;const{index:o}=t,{index:r}=n;i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)),o!==r&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){const{isCloseup:e,carouselIndex:i,closeupHeight:t,closeupWidth:n=0,widthRatio:r=1,cropHeight:l,cropWidth:d,carouselData:m,disableTransition:g,highResOnly:_,lowResOnly:v,onError:x,onLoad:f,pinId:y,isEditMode:b,isDenseView:w,pin:P}=this.props;if(!m)return null;if(r>1||r<0)throw new Error("widthRatio should be between 0 and 1 inclusive");const{carousel_slots:A=[],index:C=0}=m,T=void 0!==i?i:C,j=!e&&d,{images:S}=A[T];let M;M=e?n:j||(_?474:w?h.Lo:h.yF);const V=Math.floor(M*r),E=(null==S?void 0:S["236x"])||{},I=l||E.height||0,z=d||E.width||236,W=t||I/z*V,O=(e=>{const i=e.reduce(((e,i)=>{var t;const{images:n}=i,{height:o=1,width:r=1}=(null==n?void 0:n["736x"])||(null==n?void 0:n["236x"])||{},s=`${r}x${o}`,a=(null===(t=e[s])||void 0===t?void 0:t.times)||0;return{...e,[s]:{imageHeight:o,imageWidth:r,times:a+1}}}),{}),t=Object.keys(i).reduce(((e,t)=>i[t].times>e.times?i[t]:e),{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(i).length>1?{imageHeight:t.imageHeight,imageWidth:t.imageWidth}:null})(A);return(0,p.jsxs)(c.xu,{height:W,display:"flex",alignItems:"center",overflow:"hidden","data-test-id":"carousel-pin",minHeight:a.Ml,"data-test-image-signature":null==P?void 0:P.image_signature,children:[!b&&this.renderBadge(),(0,p.jsx)(o.Z,{trackCarousel:!0,impressionType:"Pin",loggingId:y,slotIndex:C,viewParameter:72,viewType:1,children:(0,p.jsx)(c.xu,{position:"absolute",height:W,width:V,overflow:"hidden"})},`carousel-impression-key-${T}`),(0,p.jsx)(c.xu,{width:V*A.length,dangerouslySetInlineStyle:{__style:{transition:g?"":"left .3s",left:(0,u.vF)(A.length,V,M,T)}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative",children:A.map(((i,t)=>{if(e){const e=t===A.length-1;return(({pinId:e,slot:i,slotIndex:t,onError:n,onLoad:o,widthToUse:r,gap:a},l)=>{const{url:d,width:h,height:m}=(0,s.Z)(i.images)||{},{details:g=""}=i,_=(0,u.GH)(g,l,t);return(0,p.jsx)(c.xu,{"data-test-id":"carousel-slot-container",width:r,height:"100%",marginEnd:a,children:(0,p.jsx)(c.zd,{height:"100%",wash:!0,children:(0,p.jsx)(c.Ee,{alt:_,fit:"contain",naturalHeight:null!=m?m:1,naturalWidth:null!=h?h:1,onError:n,onLoad:o,src:null!=d?d:""})})},`carousel-slot-${e}-${t}`)})({pinId:y,slot:i,slotIndex:t,onError:x,onLoad:f,widthToUse:V,gap:V<M&&!e?1:0},this.props.i18n)}return((e,i,t,n,o,r,s,a,l,d,h,m,g,_,v)=>{var x,f,y;const{images:b,details:w=""}=i;let P,A=236,C=236,T="";var j,S,M,V,E,I,z,W;if(o?(A=474,C=b&&Math.min(A/.8,A/((null!==(j=null===(S=b["564x"])||void 0===S?void 0:S.width)&&void 0!==j?j:1)/(null!==(M=null===(V=b["564x"])||void 0===V?void 0:V.height)&&void 0!==M?M:1))),T=b&&(null===(E=b["564x"])||void 0===E?void 0:E.url)):b&&b["736x"]?(C=b&&b["736x"]&&b["736x"].height,A=b&&b["736x"]&&b["736x"].width,T=b&&b["736x"]&&b["736x"].url):b&&b["236x"]&&(C=b&&b["236x"]&&b["236x"].height,A=b&&b["236x"]&&b["236x"].width,T=b&&b["236x"]&&b["236x"].url),g&&_&&(C=Math.min(g*_,null!==(I=C)&&void 0!==I?I:1)),r)P=`${null!==(z=null==b||null===(W=b["236x"])||void 0===W?void 0:W.url)&&void 0!==z?z:""} 1x`;else if(o){var O,L;P=`${null!==(O=null==b||null===(L=b["564x"])||void 0===L?void 0:L.url)&&void 0!==O?O:""} 1x`}else{var Z,k,H;P=[(null==b?void 0:b["474x"])&&`${null!==(Z=b["474x"].url)&&void 0!==Z?Z:""} 2x`,(null==b?void 0:b["736x"])&&`${null!==(k=b["736x"].url)&&void 0!==k?k:""} 3x`,(null==b?void 0:b.orig)&&`${null!==(H=b.orig.url)&&void 0!==H?H:""} 4x`].filter(Boolean).join(", ")}const R=(0,u.GH)(w,e,n),B=m?void 0:C,D=m?void 0:A,$=!!v,{boxHeight:F,boxWidth:U}=$?{boxHeight:null==v?void 0:v.imageHeight,boxWidth:null==v?void 0:v.imageWidth}:{boxHeight:B,boxWidth:D};return(0,p.jsx)(c.xu,{"data-test-id":"carousel-slot-container",height:F,width:U,children:(0,p.jsx)(c.xu,{height:m?h:void 0,width:m||void 0,"data-test-id":`carousel-img-${n}`,children:(0,p.jsx)(c.Ee,{alt:R,fit:m?"cover":"none",naturalHeight:null!==(x=C)&&void 0!==x?x:1,naturalWidth:null!==(f=A)&&void 0!==f?f:1,onError:s,onLoad:a,src:null!==(y=T)&&void 0!==y?y:"",srcSet:P})})},`carousel-slot-${t}-${n}`)})(this.props.i18n,i,y,t,_,v,x,f,0,0,l,d,W,V,O)}))})]})}}function _(e){const i=(0,d.ZP)(),t=(0,l.S6)()(e.pinId)||e.pin,n=(0,r.Z)({carouselData:null==t?void 0:t.carousel_data,images:null==t?void 0:t.images,richMetadata:null==t?void 0:t.rich_metadata,richSummary:null==t?void 0:t.rich_summary,shouldUnifyImageSizes:!0});return(0,p.jsx)(g,{...e,carouselData:n,i18n:i})}m(g,"defaultProps",{showCarouselBadge:!0})},718482:(e,i,t)=>{t.d(i,{CU:()=>r,GH:()=>l,Iw:()=>a,gA:()=>d,tD:()=>s,vF:()=>u});const n=({containerWidth:e,contentWidth:i,index:t,slotAndGapWidth:o})=>{const r=t-1,s=r*o;return i-s>=e?s:n({index:r,slotAndGapWidth:o,containerWidth:e,contentWidth:i})},o=({containerWidth:e,contentWidth:i,gap:t,index:o,slidesShownPerPosition:r,slotAndGapWidth:s})=>n({containerWidth:e,contentWidth:i,index:o,slotAndGapWidth:s})+(({slidesShownPerPosition:e,slotAndGapWidth:i})=>i-(e-parseInt(e,10))*i)({slidesShownPerPosition:r,slotAndGapWidth:s})-t,r=({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:r})=>{const s=r+i,a=s*n;if(a<=e)return 0;const l=e/s,d=(({index:e,numberOfSlides:i,slidesShownPerPosition:t})=>i-e-Math.floor(t)<1)({index:t,numberOfSlides:n,slidesShownPerPosition:l})?o({containerWidth:e,contentWidth:a,gap:i,index:t,slidesShownPerPosition:l,slotAndGapWidth:s}):t*s;return d?Math.round(-d):0},s=({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:o})=>{const s=(o+i)*n;if(s<=e||0===e)return!0;const a=r({containerWidth:e,gap:i,index:t,numberOfSlides:n,slotWidth:o}),l=s-e;return Math.abs(a)+i>=l},a=({containerWidth:e,currentIndex:i,gap:t,index:n,numberOfSlides:o,slotWidth:s})=>{const a=s+t;if(a*o<=e||0===e)return!0;return r({containerWidth:e,gap:t,index:i,numberOfSlides:o,slotWidth:s})+a*n<e+a},l=(e,i,t)=>e||`${i.bt("carousel image", "carousel image", "Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed", undefined, true)} ${t}`,d=({highResOnly:e,lowResOnly:i,slot:t})=>{var n,o,r;const{images:s}=t;var a,l,d,u;return i?`${null!==(a=null==s||null===(l=s["236x"])||void 0===l?void 0:l.url)&&void 0!==a?a:""} 1x`:e?`${null!==(d=null==s||null===(u=s["564x"])||void 0===u?void 0:u.url)&&void 0!==d?d:""} 1x`:[(null==s?void 0:s["474x"])&&`${null!==(n=s["474x"].url)&&void 0!==n?n:""} 2x`,(null==s?void 0:s["736x"])&&`${null!==(o=s["736x"].url)&&void 0!==o?o:""} 3x`,(null==s?void 0:s.orig)&&`${null!==(r=s.orig.url)&&void 0!==r?r:""} 4x`].filter(Boolean).join(", ")},u=(e,i,t,n,o=0)=>{if(t===i)return n*i*-1;const r=Math.floor(t-i),s=i+o;return n===e-1?-1*n*s+r:-1*n*s}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/19183.en_GB-1130cb02788c617c.mjs.map