(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[79246],{693099:(e,t,n)=>{n.d(t,{AA:()=>i,E9:()=>d,EU:()=>w,IO:()=>p,KH:()=>l,QR:()=>_,Uw:()=>o,ZR:()=>f,dy:()=>c,eA:()=>g,k7:()=>a,rT:()=>h,tz:()=>u,u9:()=>m,zR:()=>s,zu:()=>r});const r="OPEN_UNAUTH",o="openUnauthType",i="_isAfterLogin",a="_lastVisitedPages",s="_lastVisitedPagesBeforeLogin",c="_lastVisitedBoardPages",_="_lastVisitedPagesBeforeNavPage",l="_lastVisitedSessionPages",u="_unauthVisitedPages",g=20,d="unauthTopicsFollowed",h=["US","CA","NZ","AU"],p=new Set(["GB","IE"]),w=new Set(["AT","BE","CH","DE","DK","ES","FR","IT","NL","NO","PT","SE"]),f=new Set(["BR","MX","AR","CL","CO","PE"]),m="ad_img"},81759:(e,t,n)=>{n.d(t,{CC:()=>f,Ff:()=>T,H$:()=>k,Mt:()=>w,Yi:()=>v,Yy:()=>P,Z4:()=>p,dc:()=>y,dp:()=>m,i$:()=>d,p9:()=>b,t_:()=>g,vV:()=>h});var r=n(231486),o=n(6637),i=n(826067),a=n(400660),s=n(226198),c=n(539497),_=n(622096),l=n(957161),u=n(693099);const g=()=>(0,l.qn)(u.tz,""),d=()=>{const e=g();let t;try{t=JSON.parse(e)}catch(n){t=[]}return t},h=()=>(0,l.L_)(u.tz),p=(e,t)=>{const n=d(),r=n.length,o=r?n[0].path:"";if(r<u.eA&&(!r||e!==o)){const r={path:e,pageType:t,ts:Date.now()};(0,l.Nh)(u.tz,JSON.stringify([r].concat(n)))}},w=(e,t,n,r,o,i,a=u.k7)=>{const s=(0,l.qn)(a)?JSON.parse((0,l.qn)(a)):[];if(!s[0]||s[0].path!==e){const c=[{path:e,ts:Date.now(),pin_id:n||0,first_pin_image_signature:t||"",first_pin_id:n||"",image_info:r||"",pin_description:o||"",is_shared:!!i,pin_invite_code:i}];(0,l.Nh)(a,JSON.stringify(c.concat(s)))}},f=({path:e,image:t,dominant_color:n,pin_description:r,pin_id:o})=>{const i=(()=>{const e=(0,_.qn)(u.KH);if(!e)return[];let t;try{t=JSON.parse(e)}catch(n){t=[]}return t})();if(!i[0]||i[0].path!==e){const a=[{path:e,image:t,pin_description:r||"",dominant_color:n||"",pin_id:o||""}];(0,_.Nh)(u.KH,JSON.stringify(a.concat(i)))}};function m(e,t,n,r,o,i){w(e,t,n,r,o,i,u.zR)}const k=(e,t)=>{var n,r;w(e,t.image_signature,t.id,null===(n=t.images)||void 0===n?void 0:n["236x"],null!==(r=t.description)&&void 0!==r?r:"","",u.dy)};function b(e,t,n,r,o){w(e,t,n,r,o,"",u.QR)}function y(){return d().filter((e=>"closeup"===e.pageType)).length}function v(){const e=o.Z.create("UnauthUserDataResource");return new Promise(((t,n)=>{e.callGet().then((e=>{const o=e.resource_response.data,i=!!r.U2(s.x3);return o?((0,a.Wn)(o.medium_image_url)&&(o.medium_image_url=""),(0,c.My)("mweb.unauth.personalized_login.fetch_user_info.info.user_info_found.logged_out_cookie_"+(i?"true":"false")),t(o)):((0,c.My)("mweb.unauth.personalized_login.fetch_user_info.info.no_user_info.logged_out_cookie_"+(i?"true":"false")),n({}))})).catch((e=>{if(e&&e.message){const t=e.message.replace(/\s/g,"_").toLowerCase();(0,c.My)(`mweb.unauth.personalized_login.fetch_user_info.error.${t}`)}else(0,c.My)("mweb.unauth.personalized_login.fetch_user_info.error.unknown");return n(e)}))}))}function S({i18n:e,location:t}){const n=t.pathname.startsWith("/signup"),r=t.pathname.startsWith("/login");if(!n&&!r)return{showPLPBanner:!1,pinForBanner:null};let o;try{o=JSON.parse((0,_.qn)(u.KH))}catch(i){o=[]}if(o&&o.length>0){const t=o[0];if(t)return t.bannerCopy=e.bt("More ideas like this are waiting", "More ideas like this await", "page banner with pin image that was signed up from", undefined, true),{showPLPBanner:Boolean(t.image),pinForBanner:t}}return{showPLPBanner:!1,pinForBanner:null}}const P=e=>e.search&&e.search.startsWith("?next=")?e.search.split("?next=")[1]:null;function E({i18n:e,location:t}){var n;const r=(null===(n=t.state)||void 0===n?void 0:n.next)||P(t);if(r){const t=r.indexOf("?"),n=(0,i.mB)(r.substring(t));if(n.url&&n.media)return{showPLPBanner:!0,pinForBanner:{image:{url:(0,i.Jx)(n.media),height:1,width:1},pinDescription:n.description,bannerCopy:e.bt("Save this idea and discover more inspiration like it.", "Save this idea and discover more inspiration like it.", "page banner with pin image that was signed up from", undefined, true)}}}return{showPLPBanner:!1,pinForBanner:null}}function T({i18n:e,location:t}){return E({i18n:e,location:t}).showPLPBanner?E({i18n:e,location:t}):S({i18n:e,location:t}).showPLPBanner?S({i18n:e,location:t}):{showPLPBanner:!1,pinForBanner:null}}},400660:(e,t,n)=>{function r(e){return Boolean(null==e?void 0:e.is_matured_new_user)}n.d(t,{IR:()=>a,V0:()=>r,Wn:()=>i,xT:()=>o});const o=e=>!!e&&2===e.login_state,i=e=>!(!e||!e.match(/\/static\/images\/user\/default_\d+\.png$/));function a(e){return!e||void 0===e.third_party_marketing_tracking_enabled||null===e.third_party_marketing_tracking_enabled||e.third_party_marketing_tracking_enabled}},995146:(e,t,n)=>{n.d(t,{a$:()=>g,kv:()=>u,pH:()=>d});var r=n(643913),o=n(966113),i=n(584595),a=n(6637);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends Error{constructor(e){super(e.statusText),s(this,"name","CrossDomainHandshakeHttpError"),this.response=e}}class _ extends Error{constructor(e){super(e.message),s(this,"name","CrossDomainHandshakeApiError"),this.api_error_code=e.code,this.response=e}}const l=({path:e,data:t,unauthId:n})=>fetch(`${o.Z.settings.ACCOUNTS_PINTEREST_URL}/v3/${e}/handshake/`,{credentials:"include",mode:"cors",method:"POST",body:(0,r.Z)(t),headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","X-Pinterest-InstallId":n}}).then((e=>{if(200===e.status||401===e.status||409===e.status)return e;throw new c(e)})).then((e=>e.json())).then((e=>{if("success"===e.status)return Promise.resolve(e);if(e.code===i.Zn)return e.api_error_code=e.code,Promise.reject(e);throw new _(e)})).catch((e=>{throw e})),u=(e,t=!1)=>a.Z.create("HandshakeSessionResource",{token:e,isRegistration:t}).callCreate(),g=(e,{facebookToken:t,inviteCode:n,locale:r,referrer:o,unauthId:i})=>{const a=(e.business_name?"partner":e.facebook_id&&"facebook")||"email";let s={email:e.email||"",username:e.username||"",password:e.password||"",first_name:e.first_name||"",last_name:e.last_name||"",country:e.country||"",locale:r,referrer:o};const{age:c}=e;if(c){const e=new Date;e.setFullYear(e.getFullYear()-Number(c)),s={...s,birthday:parseInt(e/1e3,10).toString()}}return e.birthday&&(s={...s,birthday:e.birthday}),e.custom_gender&&(s={...s,custom_gender:e.custom_gender}),e.gender&&(s={...s,gender:e.gender}),e.business_name&&(s={...s,business_name:e.business_name,first_name:e.business_name}),n&&(s={...s,invite_code:n}),e.facebook_id&&(s={...s,facebook_id:e.facebook_id,facebook_token:t||e.facebook_token||"",social_username:""}),e.recaptchaV3Token&&(s={...s,recaptcha_v3_token:e.recaptchaV3Token}),l({path:`register/${a}`,data:s,unauthId:i})},d=(e,{recaptchaV3Token:t,referrer:n,unauthId:r})=>{const o=e.mfa_token?"login/mfa":"login";let i={username_or_email:e.username_or_email.trim(),password:e.password,referrer:n};return e.mfa_token&&(i={...i,mfa_token:e.mfa_token}),t&&(i={...i,token:t}),l({path:o,data:i,unauthId:r})}},120767:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(667294),o=n(231486),i=n(966113),a=n(584595),s=n(330102),c=n(290148),_=n(81759),l=n(817656),u=n(532975),g=n(487116),d=n(6637),h=n(995146),p=n(539497),w=n(226198);const f=e=>!(!e.facebook_autologin&&!e.autologin),m=function(e,t,n,r,o,i,a,c){let _="referrer_unknown";try{const e=document.referrer;_=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(d){}const l=t===Object(t)?t.container:"container_unknown";(0,p.My)("login.referrer."+_+"."+n),(0,p.My)("login.container."+String(l)+"."+n),(0,p.My)("login.type."+n);const u=n||"method_unknown",g=t.page||"page_unknown";e.facebook_autologin?((0,p.My)("web_autologin_facebook"),(0,p.My)("new_web_autologin_facebook",{page:g,referrer:_,container:l})):((0,p.My)(`web_login.${u}.success.${g}.${String(l)}.${_}.tier1`),(0,p.My)(`new_web_login.${u}.success`,{page:g,referrer:_,container:l})),(0,s.ko)({country:o,countryFromHostName:i,countryFromIp:a,regionFromIp:c,deviceType:"Desktop",eventCategory:"Logins"}),(0,p.De)({action:r?"autologin":"login",event:"success",trigger:t&&t.trigger,type:n})},k=(e,t)=>{(0,p.My)(`web_cross_domain_login.${e}.${(0,c.eD)(t)}`)},b=(e,t,n,r="other",o=!1)=>{if(e){const i=e.http_status===l.Ej?l.Ej:e.api_error_code;let s=i;i&&a.qF.has(i)&&(s=a.qF.get(i));const{container:c,trigger:_}=t;o?(0,p.My)(`unauth_web_client_cctld_login_api_error.${String(s)}.${c||"unknow_container"}.${r}`):(0,p.My)(`unauth_web_client_login_api_error.${String(s)}.${c||"unknow_container"}.${r}`),(0,p.De)({action:n?"autologin":"login",event:"fail",trigger:_,type:r})}},y=function(e,t,n){f(e)&&(0,p.dy)({event:t,provider:n})},v=({creds:e,loginContext:t,loggingData:n=Object.freeze({}),isAccountSwitch:r=!1,recaptchaV2Token:a,recaptchaV3Token:s})=>{const l=f(e),v=(0,c.eD)(e);if((0,p.De)({action:l?"autologin":"login",event:"attempt",trigger:n.trigger,type:v}),e.username_or_email&&!e.mfa_resend&&t&&-1!==i.Z.settings.CORS_HANDSHAKE_DOMAINS.indexOf(t.origin))return function({creds:e,recaptchaV3Token:t,isAutologin:n,loggingData:r,loginContext:o,type:i}){k("attempt",e);const{referrer:a,facebookToken:s,unauthId:c}=o;return(0,h.pH)(e,{recaptchaV3Token:t,referrer:a,facebookToken:s,unauthId:c}).then((t=>{const o=t&&t.data;if(o)return k("success_with_token",e),(0,h.kv)(o).then((t=>(k("success_token_exchanged",e),m(e,r,i,n),Promise.resolve())),(t=>{throw k("success_token_not_exchanged",e),t}));throw k("success_without_token",e),new Error}),(t=>{throw k("failure",e),b(t,r,n,i,!0),t}))}({creds:e,recaptchaV3Token:s,isAutologin:l,loggingData:n,loginContext:t,type:v});const S=e.google_open_id_token?"google":"facebook";y(e,"login_api_call_start",S);const P=(0,_.t_)(),E={...e,get_user:e.get_user||e.switch_account&&r,app_type_from_client:7===t.appType?7:5,visited_pages_before_login:P||null,recaptchaV2Token:a,recaptchaV3Token:s};return d.Z.create("UserSessionResource",E).callCreate({showError:!1,async:!0}).then((t=>{const{country:r,country_from_hostname:i,country_from_ip:a,region_from_ip:s}=(null==t?void 0:t.client_context)||Object.freeze({});return m(e,n,v,l,r,i,a,s),y(e,"login_api_call_success",S),(0,u.B)(!1),o.zN(w.e7.name),o.zN(w.x3.name),(0,g.D)("login").then((()=>t))}),(t=>(b(t,n,l,v),y(e,"login_api_call_failure",S),Promise.reject(t))))};var S=n(383690),P=n(283943);const E=()=>{const e=(0,P.hq)(),t=(0,S.Z)();return(0,r.useCallback)((({creds:n,...r})=>(t(),v({...r,creds:n,loginContext:e}))),[e,t])}},532975:(e,t,n)=>{n.d(t,{B:()=>i,a:()=>o});var r=n(704177);const o=()=>!!r.ZP.localStorage.getItem("uoiou"),i=e=>{r.ZP.localStorage.setItem("uoiou",!!e)}},283943:(e,t,n)=>{n.d(t,{aU:()=>s,hq:()=>a,o_:()=>o});var r=n(425288);const{Provider:o,useHook:i}=(0,r.Z)("AuthenticationContext");function a(){return i().loginContext}function s(){return i().logout}},290148:(e,t,n)=>{n.d(t,{Ny:()=>_,ZP:()=>u,eD:()=>d,lp:()=>g});var r=n(794230),o=n(704115),i=n(78714),a=n(704177),s=n(966113),c=n(539497);const _=Object.freeze({SOFT_BANNED:0,RATE_LIMITED:1,LOGIN_ASSISTANCE:2,PASSWORD_RESET_SENT:3,PREVENT_FACEBOOK_REGISTER:4,PREVENT_GOOGLE_REGISTER:5,SUSPENDED:6});class l{static defaultLoginRedirectUrl(){return window.location.pathname===s.Z.settings.PASSWORD_RESET_URL||window.location.pathname===s.Z.settings.LOGIN_URL||window.location.pathname.startsWith(s.Z.settings.ADD_SECONDARY_ACCOUNT_PAGE)?"/":window.location.pathname+window.location.search}static defaultSocialLoginRedirectUrl(){return window.location.pathname.startsWith(s.Z.settings.ADD_SECONDARY_ACCOUNT_PAGE)?"/":window.location.pathname}static isExceedRecaptchaLocalLimit(){const e=a.ZP.localStorage.getItem("urh");if(e&&e.indexOf("|")>-1){const t=e.split("|");return 3===t.length&&(new Date).getTime()/1e3-parseInt(t[0],10)<=3600}return!1}static updateRecaptchaTimeStamp(){const e=a.ZP.localStorage.getItem("urh");let t=[];e&&(t=e.split("|"),3===t.length&&t.shift());const n=((new Date).getTime()/1e3).toString();t.push(n);const r=t.join("|");a.ZP.localStorage.setItem("urh",r)}static isFullyLoggedIn(e,t){return e&&1===t}static handleRedirect(e){if(!e){e="/";const t=(0,o.Z)();if(t){const n=t.next;n&&(e=n,delete t.next),e=(0,r.Z)(e,t)}}(0,i.Z)(e)}static handleRedirectWithFallbackWindowLocation(){this.handleRedirect(this.defaultLoginRedirectUrl())}static handleSignupRedirect(e,t){a.ZP.localStorage.setItem("signupTime",Date.now()),!t&&e&&"/"!==e?l.handleRedirect(e):l.handleRedirect("/")}static storeLoginCredentialsToBrowser(e){const t=window.navigator.credentials;if(t&&e.username_or_email)try{const n=new window.PasswordCredential({id:e.username_or_email,password:e.password});t.store(n).then((()=>{(0,c.My)("navigatorCredentials.store.success")}))}catch(n){(0,c.My)("navigatorCredentials.store.error")}}static handleLoginMfa(e,t,n){(0,c.My)("multi_step_login"),l.storeLoginCredentialsToBrowser(e),n?n(e,t):(0,c.My)("unauth.login.error.CLIENT_ERROR.null_mfa_handler")}}const u=l;function g(e){return e.facebook_id?"facebook":e.google_open_id_token?"google_one_tap":e.line_id_token?"line":e.username_or_email?"email":"other"}function d(e){return e.mfa_token?"mfa_token":e.mfa_resend?"mfa_resend":g(e)}},383690:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(667294),o=n(773285);const i=()=>{const e=(0,o.F)();return(0,r.useCallback)((()=>{e.flush()}),[e])}},817656:(e,t,n)=>{n.d(t,{AB:()=>r,Ej:()=>o,Sf:()=>i});const r=412,o=429,i=500},487116:(e,t,n)=>{n.d(t,{D:()=>a,N:()=>i});var r=n(172071);const o=.1;async function i(){const e=navigator.serviceWorker;if(r.Z.increment("web_service_worker.update",o),e&&e.getRegistration){const n=await e.getRegistration();if(!n)return r.Z.increment("web_service_worker.update.registration.not_exist",o),await async function(){const e=navigator.serviceWorker;if(r.Z.increment("web_service_worker.install",o),e&&e.register)try{const t=await e.register("/sw.js");return r.Z.increment("web_service_worker.install.success",o),t}catch(t){throw r.Z.increment("web_service_worker.install.error",o),t}}();r.Z.increment("web_service_worker.update.registration.exist",o);try{return await n.update(),r.Z.increment("web_service_worker.update.success",o),n}catch(t){throw r.Z.increment("web_service_worker.update.fail",o),t}}}async function a(e){const t=navigator.serviceWorker;if(r.Z.increment("web_service_worker.unregister",o,{source:e||"unknown"}),t&&t.getRegistration)try{const n=await t.getRegistration();n?(r.Z.increment("web_service_worker.unregister.registration.exist",o,{source:e||"unknown"}),await n.unregister(),r.Z.increment("web_service_worker.unregister.success",o,{source:e||"unknown"}),async function(e){const t=navigator.serviceWorker;if(r.Z.increment("web_service_worker.clear_app_shell",o,{source:e||"unknown"}),t&&window.caches){const t=(await window.caches.keys()).find((e=>e.startsWith("workbox-precaching")));t?(r.Z.increment("web_service_worker.clear_app_shell.precache.exist",o,{source:e||"unknown"}),(await window.caches.open(t)).delete("/sw-shell.html"),r.Z.increment("web_service_worker.clear_app_shell.delete",o,{source:e||"unknown"})):r.Z.increment("web_service_worker.clear_app_shell.precache.not_exist",o,{source:e})}}(e)):r.Z.increment("web_service_worker.unregister.registration.not_exist",o,{source:e||"unknown"})}catch(n){r.Z.increment("web_service_worker.unregister.fail",o,{source:e||"unknown"})}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/79246.en_GB-51fdffaeea257dbc.mjs.map